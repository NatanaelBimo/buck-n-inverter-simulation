Version 4
SHEET 1 1356 1528
WIRE -208 -160 -240 -160
WIRE -80 -160 -208 -160
WIRE 16 -160 -80 -160
WIRE 96 -160 16 -160
WIRE 288 -160 96 -160
WIRE -208 -128 -208 -160
WIRE -80 -128 -80 -160
WIRE 16 -128 16 -160
WIRE 288 -128 288 -160
WIRE -448 -32 -640 -32
WIRE -416 -32 -448 -32
WIRE -208 -32 -208 -48
WIRE -80 -32 -80 -64
WIRE 16 -32 16 -64
WIRE 288 -32 288 -64
WIRE 288 -32 256 -32
WIRE -640 -16 -640 -32
WIRE -448 -16 -448 -32
WIRE 96 0 96 -160
WIRE 288 0 288 -32
WIRE -848 32 -848 -32
WIRE -512 32 -528 32
WIRE -896 48 -912 48
WIRE -640 80 -640 64
WIRE -528 80 -528 32
WIRE -528 80 -640 80
WIRE -96 80 -448 80
WIRE 16 80 -16 80
WIRE 48 80 16 80
WIRE -640 96 -640 80
WIRE -912 144 -912 48
WIRE -912 144 -960 144
WIRE -848 144 -848 128
WIRE -704 144 -848 144
WIRE -448 144 -448 80
WIRE -848 160 -848 144
WIRE 96 160 96 96
WIRE 96 160 80 160
WIRE 288 160 288 64
WIRE 288 160 96 160
WIRE 320 160 288 160
WIRE 432 160 400 160
WIRE 528 160 432 160
WIRE 624 160 528 160
WIRE 752 160 624 160
WIRE 784 160 752 160
WIRE -528 192 -528 80
WIRE -512 192 -528 192
WIRE 96 192 96 160
WIRE 432 192 432 160
WIRE 528 192 528 160
WIRE 624 192 624 160
WIRE 752 192 752 160
WIRE -912 240 -912 144
WIRE -896 240 -912 240
WIRE -848 304 -848 256
WIRE -640 304 -640 192
WIRE -448 304 -448 240
WIRE 96 304 96 256
WIRE 432 304 432 256
WIRE 432 304 96 304
WIRE 528 304 528 256
WIRE 528 304 432 304
WIRE 624 304 624 256
WIRE 624 304 528 304
WIRE 752 304 752 272
WIRE 752 304 624 304
WIRE 752 320 752 304
WIRE -288 448 -320 448
WIRE -48 448 -224 448
WIRE -16 448 -48 448
WIRE 96 448 64 448
WIRE 752 496 624 496
WIRE 784 496 752 496
WIRE 624 512 624 496
WIRE 416 528 336 528
WIRE 560 528 480 528
WIRE -48 544 -48 448
WIRE -48 544 -80 544
WIRE -784 560 -848 560
WIRE -320 560 -320 448
WIRE -320 560 -784 560
WIRE -144 560 -320 560
WIRE -912 576 -944 576
WIRE -48 576 -80 576
WIRE -816 592 -848 592
WIRE 752 592 752 496
WIRE -112 608 -112 592
WIRE 624 608 624 592
WIRE -816 624 -816 592
WIRE -784 624 -816 624
WIRE 336 624 336 528
WIRE 368 624 336 624
WIRE 448 624 432 624
WIRE 560 624 560 528
WIRE 560 624 528 624
WIRE -48 640 -48 576
WIRE -48 640 -176 640
WIRE 64 640 64 624
WIRE 64 640 -48 640
WIRE 64 656 64 640
WIRE 624 688 624 672
WIRE 752 688 752 672
WIRE 752 688 624 688
WIRE 560 720 560 624
WIRE 560 720 464 720
WIRE 752 720 752 688
WIRE 752 720 560 720
WIRE 336 736 336 624
WIRE 336 736 304 736
WIRE 400 736 336 736
WIRE 496 752 464 752
WIRE -880 768 -880 752
WIRE -176 768 -176 640
WIRE -144 768 -176 768
WIRE 752 768 752 720
WIRE 96 784 96 448
WIRE 96 784 -80 784
WIRE 432 784 432 768
WIRE -144 800 -176 800
WIRE 496 800 496 752
WIRE -112 832 -112 816
WIRE 384 848 304 848
WIRE 496 848 496 800
WIRE 496 848 464 848
WIRE 528 848 496 848
WIRE 640 848 608 848
WIRE -880 864 -880 848
WIRE 640 880 640 848
WIRE 752 880 752 848
WIRE -320 896 -320 560
WIRE -288 896 -320 896
WIRE -176 896 -176 800
WIRE -176 896 -208 896
WIRE -16 896 -176 896
WIRE 96 896 96 784
WIRE 96 896 64 896
FLAG -80 -32 0
FLAG 16 -32 0
FLAG -208 -32 0
FLAG -240 -160 VIN
IOPIN -240 -160 In
FLAG 784 160 VOUT
IOPIN 784 160 Out
FLAG 16 80 VG
FLAG 80 160 VOI
FLAG 256 -32 BOOTSTRAP
FLAG 752 320 0
FLAG 752 880 0
FLAG 304 736 V_E
FLAG 784 496 VOUT
IOPIN 784 496 In
FLAG 432 784 0
FLAG -112 528 VCC
FLAG -112 752 VCC
FLAG 64 544 VCC
FLAG 64 736 0
FLAG -112 608 0
FLAG -112 832 0
FLAG -848 -32 VCC
FLAG -848 304 0
FLAG -640 304 0
FLAG -448 304 0
FLAG -960 144 G_CTRL
FLAG -944 576 G_CTRL
FLAG -880 544 VCC
FLAG -880 608 0
FLAG 432 704 VCC
FLAG 640 880 0
FLAG -784 624 V_E
FLAG -416 -32 BOOTSTRAP
FLAG 304 848 VIN
IOPIN 304 848 In
FLAG 496 800 V_REF
FLAG -880 752 VCC
FLAG -880 864 0
FLAG -784 560 TRI
SYMBOL nmos 48 0 R0
WINDOW 0 51 16 Left 2
WINDOW 3 51 48 Left 2
SYMATTR InstName M1
SYMATTR Value AON6312
SYMBOL ind 304 176 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 1
SYMATTR InstName L1
SYMATTR Value {L}
SYMBOL cap -96 -128 R0
WINDOW 3 24 56 Left 1
SYMATTR Value {C_IN1}
SYMATTR InstName C1
SYMBOL cap 0 -128 R0
WINDOW 3 24 56 Left 1
SYMATTR Value {C_IN2}
SYMATTR InstName C2
SYMBOL cap 416 192 R0
WINDOW 3 24 56 Left 1
SYMATTR Value {C_OUT}
SYMATTR InstName C3
SYMBOL cap 512 192 R0
WINDOW 3 24 56 Left 1
SYMATTR Value {C_OUT}
SYMATTR InstName C4
SYMBOL cap 608 192 R0
WINDOW 3 24 56 Left 1
SYMATTR Value {C_OUT}
SYMATTR InstName C5
SYMBOL res 736 176 R0
WINDOW 3 36 76 Left 1
SYMATTR Value {R_L}
SYMATTR InstName R1
SYMBOL voltage -208 -144 R0
WINDOW 3 32 72 Left 1
SYMATTR Value {V_IN}
SYMATTR InstName V1
SYMBOL res 0 64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 1
SYMATTR InstName R2
SYMATTR Value {R_G}
SYMBOL schottky 112 256 R180
WINDOW 0 35 44 Left 2
WINDOW 3 35 20 Left 2
SYMATTR InstName D1
SYMATTR Value B560C
SYMBOL diode 272 -128 R0
SYMATTR InstName D3
SYMATTR Value 1N4148
SYMBOL cap 272 0 R0
WINDOW 3 24 56 Left 1
SYMATTR Value {C_BOOT}
SYMATTR InstName C6
SYMBOL OpAmps\\UniversalOpAmp2 432 736 M0
SYMATTR InstName U1
SYMBOL OpAmps\\UniversalOpAmp2 -880 576 M0
SYMATTR InstName U2
SYMBOL OpAmps\\UniversalOpAmp2 -112 560 M0
SYMATTR InstName U3
SYMBOL OpAmps\\UniversalOpAmp2 -112 784 R0
SYMATTR InstName U4
SYMBOL res 736 576 R0
WINDOW 3 36 76 Left 1
SYMATTR Value {R_DIV1}
SYMATTR InstName R3
SYMBOL res 736 752 R0
WINDOW 3 36 76 Left 1
SYMATTR Value {R_DIV2}
SYMATTR InstName R4
SYMBOL res 608 496 R0
WINDOW 3 36 76 Left 1
SYMATTR Value {R_ZI}
SYMATTR InstName R5
SYMBOL cap 608 608 R0
WINDOW 3 24 56 Left 1
SYMATTR Value {C_ZI}
SYMATTR InstName C7
SYMBOL res 544 608 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 1
SYMATTR InstName R6
SYMATTR Value {R_ZF}
SYMBOL cap 432 608 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 1
SYMATTR InstName C8
SYMATTR Value {C_ZF1}
SYMBOL cap 480 512 R90
WINDOW 0 -1 32 VBottom 2
WINDOW 3 32 32 VTop 1
SYMATTR InstName C9
SYMATTR Value {C_ZF2}
SYMBOL res 480 832 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 1
SYMATTR InstName R7
SYMATTR Value {R_REF1}
SYMBOL res 624 832 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 1
SYMATTR InstName R8
SYMATTR Value {R_REF2}
SYMBOL res -304 880 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 1
SYMATTR InstName R9
SYMATTR Value {R_1OS}
SYMBOL res -32 880 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 1
SYMATTR InstName R10
SYMATTR Value {R_FOS}
SYMBOL res -32 432 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 1
SYMATTR InstName R11
SYMATTR Value {R_OSC}
SYMBOL cap -288 432 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 1
SYMATTR InstName C10
SYMATTR Value {C_OSC}
SYMBOL res 80 528 M0
WINDOW 3 36 76 Left 1
SYMATTR Value {R_DIVREF1}
SYMATTR InstName R12
SYMBOL res 80 640 M0
WINDOW 3 36 76 Left 1
SYMATTR Value {R_DIVREF2}
SYMATTR InstName R13
SYMBOL npn -512 -16 R0
SYMATTR InstName Q1
SYMATTR Value 2N3019
SYMBOL pnp -512 240 M180
SYMATTR InstName Q2
SYMATTR Value 2N2907
SYMBOL npn -704 96 R0
SYMATTR InstName Q3
SYMATTR Value 2N2222
SYMBOL res -656 -32 R0
WINDOW 3 36 76 Left 1
SYMATTR Value {R_TP}
SYMATTR InstName R14
SYMBOL pmos -896 128 M180
SYMATTR InstName M2
SYMATTR Value AO6407
SYMBOL nmos -896 160 R0
SYMATTR InstName M3
SYMATTR Value AO6408
SYMBOL voltage -880 752 R0
SYMATTR InstName V2
SYMATTR Value 5
TEXT 752 -184 Right 2 !.inc close-loop.txt
TEXT 752 -160 Right 2 !.tran 5m uic
TEXT -104 376 Center 2 ;TRIANGLE WAVE GEN.
TEXT 536 376 Center 2 ;ERROR AMPLIFIER
TEXT -856 -184 Center 2 ;CMOS\nNOT GATE
TEXT -536 -184 Center 2 ;TOTEM-POLE\nGATE DRIVER
TEXT -864 376 Center 2 ;COMPARATOR
TEXT 288 -184 Center 2 ;BOOTSTRAPING
